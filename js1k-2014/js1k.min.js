d=document;W=a.width/3;H=a.height/3;c.scale(3,3);k=0;g="#3BA";r="#E54";N=Date.now;pN=N();R=Math.random;s=0;v=5;T=10;x=T,y=H/2;c.t=c.fillText;e=new Array();
b=new Array();img=new Image();img.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAQAAABaf7ccAAAAKklEQVR4AWMgDP4DIZyNUwmExGMKmqL/COWMaEYzgtmYutHFYBiXhaQAAE5qF+vrh9KMAAAAAElFTkSuQmCC";
n=t=0;fs=function(f){c.fillStyle=f;};dd=function(m,i,f,j){fs(i);c.fillRect(m.x,m.y,f||m.w,j||m.w);};co=function(p,l,j){for(var h=0;h<l.length;h++){var f=l[h];
if((p.x+p.w>=f.x)&&(p.x<=f.x+f.w)&&(p.y+p.w>=f.y)&&(p.y<=f.y+f.w)){l.splice(h,1);s+=j;return true;}}return false;};nr=function(f,j,i,h){return new Object({x:f||W+R()*150,y:j||R()*H,i:0,w:i||T,l:0||h});
};while(k<T){e.push(nr());k++;}c.globalAlpha=0.5;gl=function(){requestAnimationFrame(gl);dd(({x:0,y:0}),"666",W,H);if(v<1){fs(r);c.t("score: "+s,T,T);return;
}D=(N()-pN)/100;pN=N();dd(({x:5,y:5}),g,5,5);c.t(v,T,T);dd(({x:5,y:15}),r,5,5);c.t(s,T,20);if(k!=0){if(k==40){y+=3;}if(k==38){y-=3;}if(k==32){b.push(nr(x,y,5));
k=0;}}if(y<0){y=0;}if(y+T>H){y=H-T;}var j=({x:x,y:y,w:T});if(co(j,e,0)){v--;}if(n++>10){n=0;t++;if(t>1){t=0;}}c.drawImage(img,t*8,0,8,8,j.x,j.y,8,8);for(var h=0;
h<e.length;h++){var f=e[h];f.y-=3*Math.cos(f.i*D);f.x-=3;f.i++;if(f.x<0||co(f,b,1)){e[h]=nr();}dd(f,r);}for(var h=0;h<b.length;h++){var f=b[h];f.x+=3;if(f.x>W){b.splice(h,1);
}dd(f,"#FD6");}};gl();d.onkeydown=function(f){k=f.keyCode;};d.onkeyup=function(){k=0;};