d=document;z=3;W=a.width/z;H=a.height/z;c.scale(z,z);k=0;g="#3BA";w="#FD6";r="#E54";N=Date.now;pN=N();R=Math.random;s=0;v=5;T=10;F=5;x=T;y=H/2;c.t=c.fillText;e=[];b=[];dd=function(f,h,n,l){c.fillStyle=h;c.fillRect(f.x,f.y,n||f.w,l||f.w)};co=function(f,h,n){for(var l=0;l<h.length;l++){var m=h[l];if(f.x+f.w>=m.x&&(f.x<=m.x+m.w&&(f.y+f.w>=m.y&&f.y<=m.y+m.w)))return h.splice(l,1),s+=n,!0}return!1};for(nr=function(f,h,n,l){return Object({x:f||W+150*R(),y:h||R()*H,i:0,w:n||T,l:l})};k<T;)e.push(nr()),k++;
function gl(){requestAnimationFrame(gl);dd({x:0,y:0},"#666",W,H);if(0>=v)c.fillStyle=r,c.t("lost, reload",T,T);else{D=(N()-pN)/100;pN=N();c.fillStyle=g;c.t(v,20,15);c.fillStyle=r;c.t(s,20,25);0!=k&&(40==k&&(y+=z),38==k&&(y-=z),32==k&&(b.push(nr(x,y,F)),k=0));0>y&&(y=0);y+T>H&&(y=H-T);var f={x:x,y:y,w:T};co(f,e)&&v--;dd(f,g);for(f=0;f<e.length;f++){var h=e[f];h.y-=z*Math.cos(h.i*D);h.x-=z;h.i++;if(0>h.x||co(h,b,1))e[f]=nr();dd(h,r)}for(f=0;f<b.length;f++)h=b[f],h.x+=z,h.x>W&&b.splice(f,1),dd(h,w)}}
gl();d.onkeydown=function(f){k=f.keyCode};d.onkeyup=function(f){k=0};
