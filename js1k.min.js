function f(a){c.fillStyle=a}function X(a,b,d,e){f(b),c.fillRect(a.x,a.y,d||a.w,e||a.w)}function O(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];if(a.x+a.w>=e.x&&a.x<=e.x+e.w&&a.y+a.w>=e.y&&a.y<=e.y+e.w)return b.splice(d,1),s+=c,!0}return!1}function Z(a,b,c,d){return{x:a||W+150*R(),y:b||R()*H,i:0,w:c||T,l:d}}function G(){if(requestAnimationFrame(G),X({x:0,y:0},"#666",W,H),1>v)f(r),c.t(":(",T,T);else{D=(N()-pN)/100,pN=N(),f(g),c.t(v,T,T),f(r),c.t(s,T,20),0!=k&&(40==k&&(y+=3),38==k&&(y-=3),32==k&&(b.push(Z(x,y,5)),k=0)),0>y&&(y=0),y+T>H&&(y=H-T);var a={x:x,y:y,w:T};for(O(a,e,0)&&v--,X(a,g),a=0;a<e.length;a++){var d=e[a];d.y-=3*Math.cos(d.i*D),d.x-=3,d.i++,(0>d.x||O(d,b,1))&&(e[a]=Z()),X(d,r)}for(a=0;a<b.length;a++)d=b[a],d.x+=3,d.x>W&&b.splice(a,1),X(d,"#FD6")}}for(d=document,W=a.width/3,H=a.height/3,c.scale(3,3),k=0,g="#3BA",r="#E54",N=Date.now,pN=N(),R=Math.random,s=0,v=5,x=T=10,y=H/2,c.t=c.fillText,e=[],b=[];T>k;)e.push(Z()),k++;G(),d.onkeydown=function(a){k=a.keyCode},d.onkeyup=function(){k=0};